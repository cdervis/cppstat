name: "Verify data"

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  yamllint:
    name: "YAML lint"
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout"
        uses: actions/checkout@v4

      - name: "YAML lint"
        uses: karancode/yamllint-github-action@master
        with:
          yamllint_file_or_dir: "*.yaml"
          yamllint_strict: false
          yamllint_comment: false

      - name: "Set up Python"
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: "Install dependencies"
        run: |
          python3 -m pip install --upgrade pip
          python3 -m pip install PyYAML jsonschema

      - name: "Verify features"
        run: |
          for file in features_c*.yaml; do
            python3 verify_features.py "$file"
          done
